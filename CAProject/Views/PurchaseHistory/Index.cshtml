@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Dictionary<Product, List<ActivationCode>> acLookup = (Dictionary<Product, List<ActivationCode>>)ViewData["acLookup"];
    List<Order> orders = (List<Order>)ViewData["Order"];
}

<link href="~/css/OrderHistory.css" rel="stylesheet" type="text/css"/>

<div style="font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif">
    <h2>ORDER HISTORY</h2>
    <hr />
</div>

@*@foreach (Product product in acLookup.Keys)
{
    <ul>
        <li>@product.Name</li>
        @foreach (ActivationCode ac in acLookup[product])
        {
            <li>@ac.ActivationCodeId, @ac.Order.CheckOutDate</li>
        }
    </ul>
}*@

@foreach (Order order in orders)
{
<div class="order-container">
    <div class="order-id">Order: @order.Id</div>
    <div class="order-data">Placed on: @order.CheckOutDate</div>
    <hr />
    @foreach (Product product in acLookup.Keys)
    {
        
        <div class="order-item-container">
            <table style="min-width: 800px; padding-top:15px">
                <tr>
                    <td class="img-cell"><img src=@product.Image class="order-item-img"/></td>
                    <td class="des-cell">
                        <p>@product.Name</p>
                    </td>
                    <td class="qty-cell">
                    Qty: @acLookup[product].Count</td>
                    <td class="ac-cell">
                        <span>Activation Codes:</span>
                        <select id="acs">
                            @foreach (ActivationCode ac in acLookup[product])
                            {
                                if (ac.OrderId == order.Id)
                                { <option>@ac.ActivationCodeId</option> }
                            }
                        </select>
                    </td>
                </tr>
            </table>
        </div>
    }

</div>
}
